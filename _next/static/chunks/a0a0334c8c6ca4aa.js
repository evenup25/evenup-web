(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,33525,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"warnOnce",{enumerable:!0,get:function(){return r}});let r=e=>{}},79474,(e,t,s)=>{"use strict";var r=e.r(71645).__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;s.c=function(e){return r.H.useMemoCache(e)}},932,(e,t,s)=>{"use strict";t.exports=e.r(79474)},23261,e=>{"use strict";var t=e.i(43476),s=e.i(932),r=e.i(71645),l=e.i(617),a=e.i(53210);let i={activeUsers:0,invitedUsers:0,deletedUsers:0,usersActive24h:0,usersActive7d:0,totalLogs:0,criticalLogs:0,highLogs:0};function o(){let e,o,d,n,u,g,v,h,m,x,p,_,b,f,j,L,U,A=(0,s.c)(46),[S,y]=(0,r.useState)(i),[w,N]=(0,r.useState)(!0),[T,O]=(0,r.useState)(null),[D,R]=(0,r.useState)(null);A[0]===Symbol.for("react.memo_cache_sentinel")?(e=async()=>{N(!0),O(null);let e=new Date,t=new Date(e.getTime()-864e5).toISOString(),s=new Date(e.getTime()-6048e5).toISOString(),[r,l,i,o,c,d,n,u]=await Promise.all([a.supabase.from("user_profiles").select("id",{count:"exact",head:!0}).eq("status","active").is("deleted_at",null),a.supabase.from("user_profiles").select("id",{count:"exact",head:!0}).eq("status","invited").is("deleted_at",null),a.supabase.from("user_profiles").select("id",{count:"exact",head:!0}).not("deleted_at","is",null),a.supabase.from("user_profiles").select("id",{count:"exact",head:!0}).is("deleted_at",null).gte("last_active_at",t),a.supabase.from("user_profiles").select("id",{count:"exact",head:!0}).is("deleted_at",null).gte("last_active_at",s),a.supabase.from("app_error_logs").select("id",{count:"exact",head:!0}),a.supabase.from("app_error_logs").select("id",{count:"exact",head:!0}).eq("severity","critical"),a.supabase.from("app_error_logs").select("id",{count:"exact",head:!0}).eq("severity","high")]),g=r.error??l.error??i.error??o.error??c.error??d.error??n.error??u.error;if(g){O(g.message),N(!1);return}y({activeUsers:r.count??0,invitedUsers:l.count??0,deletedUsers:i.count??0,usersActive24h:o.count??0,usersActive7d:c.count??0,totalLogs:d.count??0,criticalLogs:n.count??0,highLogs:u.count??0}),R(new Date().toLocaleString()),N(!1)},A[0]=e):e=A[0];let C=e;A[1]===Symbol.for("react.memo_cache_sentinel")?(o=()=>{let e=window.setTimeout(()=>{C()},0);return()=>{window.clearTimeout(e)}},d=[C],A[1]=o,A[2]=d):(o=A[1],d=A[2]),(0,r.useEffect)(o,d),A[3]===Symbol.for("react.memo_cache_sentinel")?(n=(0,t.jsx)("h2",{className:"text-lg font-semibold text-slate-900",children:"System overview"}),A[3]=n):n=A[3],A[4]===Symbol.for("react.memo_cache_sentinel")?(u=(0,t.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[n,(0,t.jsx)("button",{type:"button",onClick:()=>void C(),className:"rounded-lg border border-slate-300 px-3 py-2 text-sm text-slate-700 hover:bg-slate-100",children:"Refresh"})]}),A[4]=u):u=A[4],A[5]!==T?(g=T?(0,t.jsx)("p",{className:"mt-3 rounded-lg border border-red-200 bg-red-50 px-3 py-2 text-sm text-red-700",children:T}):null,A[5]=T,A[6]=g):g=A[6],A[7]!==w||A[8]!==S.activeUsers?(v=(0,t.jsx)(c,{label:"Active users",value:S.activeUsers,loading:w}),A[7]=w,A[8]=S.activeUsers,A[9]=v):v=A[9],A[10]!==w||A[11]!==S.invitedUsers?(h=(0,t.jsx)(c,{label:"Invited users",value:S.invitedUsers,loading:w}),A[10]=w,A[11]=S.invitedUsers,A[12]=h):h=A[12],A[13]!==w||A[14]!==S.deletedUsers?(m=(0,t.jsx)(c,{label:"Deleted users",value:S.deletedUsers,loading:w}),A[13]=w,A[14]=S.deletedUsers,A[15]=m):m=A[15],A[16]!==w||A[17]!==S.usersActive24h?(x=(0,t.jsx)(c,{label:"Active in last 24h",value:S.usersActive24h,loading:w}),A[16]=w,A[17]=S.usersActive24h,A[18]=x):x=A[18],A[19]!==w||A[20]!==S.usersActive7d?(p=(0,t.jsx)(c,{label:"Active in last 7d",value:S.usersActive7d,loading:w}),A[19]=w,A[20]=S.usersActive7d,A[21]=p):p=A[21],A[22]!==w||A[23]!==S.totalLogs?(_=(0,t.jsx)(c,{label:"Total logs",value:S.totalLogs,loading:w}),A[22]=w,A[23]=S.totalLogs,A[24]=_):_=A[24],A[25]!==w||A[26]!==S.criticalLogs?(b=(0,t.jsx)(c,{label:"Critical logs",value:S.criticalLogs,loading:w}),A[25]=w,A[26]=S.criticalLogs,A[27]=b):b=A[27],A[28]!==w||A[29]!==S.highLogs?(f=(0,t.jsx)(c,{label:"High severity logs",value:S.highLogs,loading:w}),A[28]=w,A[29]=S.highLogs,A[30]=f):f=A[30],A[31]!==p||A[32]!==_||A[33]!==b||A[34]!==f||A[35]!==v||A[36]!==h||A[37]!==m||A[38]!==x?(j=(0,t.jsxs)("div",{className:"mt-4 grid gap-3 sm:grid-cols-2 lg:grid-cols-4",children:[v,h,m,x,p,_,b,f]}),A[31]=p,A[32]=_,A[33]=b,A[34]=f,A[35]=v,A[36]=h,A[37]=m,A[38]=x,A[39]=j):j=A[39];let E=D??"not fetched yet";return A[40]!==E?(L=(0,t.jsxs)("p",{className:"mt-4 text-xs text-slate-500",children:["Last updated: ",E]}),A[40]=E,A[41]=L):L=A[41],A[42]!==j||A[43]!==L||A[44]!==g?(U=(0,t.jsxs)(l.default,{pageTitle:"Dashboard",pageDescription:"Live overview of user lifecycle and production errors.",requiredRole:"viewer",children:[u,g,j,L]}),A[42]=j,A[43]=L,A[44]=g,A[45]=U):U=A[45],U}function c(e){let r,l,a,i=(0,s.c)(7),{label:o,value:c,loading:d}=e;i[0]!==o?(r=(0,t.jsx)("p",{className:"text-xs uppercase tracking-wide text-slate-600",children:o}),i[0]=o,i[1]=r):r=i[1];let n=d?"...":c;return i[2]!==n?(l=(0,t.jsx)("p",{className:"mt-2 text-2xl font-semibold text-slate-900",children:n}),i[2]=n,i[3]=l):l=i[3],i[4]!==r||i[5]!==l?(a=(0,t.jsxs)("article",{className:"rounded-xl border border-slate-200 bg-slate-50 p-4",children:[r,l]}),i[4]=r,i[5]=l,i[6]=a):a=i[6],a}e.s(["default",()=>o])}]);