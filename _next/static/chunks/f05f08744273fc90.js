(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,33525,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"warnOnce",{enumerable:!0,get:function(){return s}});let s=e=>{}},79474,(e,t,r)=>{"use strict";var s=e.r(71645).__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;r.c=function(e){return s.H.useMemoCache(e)}},932,(e,t,r)=>{"use strict";t.exports=e.r(79474)},98183,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s={assign:function(){return i},searchParamsToUrlQuery:function(){return a},urlQueryToSearchParams:function(){return o}};for(var n in s)Object.defineProperty(r,n,{enumerable:!0,get:s[n]});function a(e){let t={};for(let[r,s]of e.entries()){let e=t[r];void 0===e?t[r]=s:Array.isArray(e)?e.push(s):t[r]=[e,s]}return t}function l(e){return"string"==typeof e?e:("number"!=typeof e||isNaN(e))&&"boolean"!=typeof e?"":String(e)}function o(e){let t=new URLSearchParams;for(let[r,s]of Object.entries(e))if(Array.isArray(s))for(let e of s)t.append(r,l(e));else t.set(r,l(s));return t}function i(e,...t){for(let r of t){for(let t of r.keys())e.delete(t);for(let[t,s]of r.entries())e.append(t,s)}return e}},95057,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s={formatUrl:function(){return o},formatWithValidation:function(){return u},urlObjectKeys:function(){return i}};for(var n in s)Object.defineProperty(r,n,{enumerable:!0,get:s[n]});let a=e.r(90809)._(e.r(98183)),l=/https?|ftp|gopher|file/;function o(e){let{auth:t,hostname:r}=e,s=e.protocol||"",n=e.pathname||"",o=e.hash||"",i=e.query||"",u=!1;t=t?encodeURIComponent(t).replace(/%3A/i,":")+"@":"",e.host?u=t+e.host:r&&(u=t+(~r.indexOf(":")?`[${r}]`:r),e.port&&(u+=":"+e.port)),i&&"object"==typeof i&&(i=String(a.urlQueryToSearchParams(i)));let c=e.search||i&&`?${i}`||"";return s&&!s.endsWith(":")&&(s+=":"),e.slashes||(!s||l.test(s))&&!1!==u?(u="//"+(u||""),n&&"/"!==n[0]&&(n="/"+n)):u||(u=""),o&&"#"!==o[0]&&(o="#"+o),c&&"?"!==c[0]&&(c="?"+c),n=n.replace(/[?#]/g,encodeURIComponent),c=c.replace("#","%23"),`${s}${u}${n}${c}${o}`}let i=["auth","hash","host","hostname","href","path","pathname","port","protocol","query","search","slashes"];function u(e){return o(e)}},18581,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"useMergedRef",{enumerable:!0,get:function(){return n}});let s=e.r(71645);function n(e,t){let r=(0,s.useRef)(null),n=(0,s.useRef)(null);return(0,s.useCallback)(s=>{if(null===s){let e=r.current;e&&(r.current=null,e());let t=n.current;t&&(n.current=null,t())}else e&&(r.current=a(e,s)),t&&(n.current=a(t,s))},[e,t])}function a(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let r=e(t);return"function"==typeof r?r:()=>e(null)}}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},18967,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s={DecodeError:function(){return b},MiddlewareNotFoundError:function(){return _},MissingStaticPage:function(){return v},NormalizeError:function(){return g},PageNotFoundError:function(){return y},SP:function(){return h},ST:function(){return x},WEB_VITALS:function(){return a},execOnce:function(){return l},getDisplayName:function(){return d},getLocationOrigin:function(){return u},getURL:function(){return c},isAbsoluteUrl:function(){return i},isResSent:function(){return m},loadGetInitialProps:function(){return p},normalizeRepeatedSlashes:function(){return f},stringifyError:function(){return j}};for(var n in s)Object.defineProperty(r,n,{enumerable:!0,get:s[n]});let a=["CLS","FCP","FID","INP","LCP","TTFB"];function l(e){let t,r=!1;return(...s)=>(r||(r=!0,t=e(...s)),t)}let o=/^[a-zA-Z][a-zA-Z\d+\-.]*?:/,i=e=>o.test(e);function u(){let{protocol:e,hostname:t,port:r}=window.location;return`${e}//${t}${r?":"+r:""}`}function c(){let{href:e}=window.location,t=u();return e.substring(t.length)}function d(e){return"string"==typeof e?e:e.displayName||e.name||"Unknown"}function m(e){return e.finished||e.headersSent}function f(e){let t=e.split("?");return t[0].replace(/\\/g,"/").replace(/\/\/+/g,"/")+(t[1]?`?${t.slice(1).join("?")}`:"")}async function p(e,t){let r=t.res||t.ctx&&t.ctx.res;if(!e.getInitialProps)return t.ctx&&t.Component?{pageProps:await p(t.Component,t.ctx)}:{};let s=await e.getInitialProps(t);if(r&&m(r))return s;if(!s)throw Object.defineProperty(Error(`"${d(e)}.getInitialProps()" should resolve to an object. But found "${s}" instead.`),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return s}let h="undefined"!=typeof performance,x=h&&["mark","measure","getEntriesByName"].every(e=>"function"==typeof performance[e]);class b extends Error{}class g extends Error{}class y extends Error{constructor(e){super(),this.code="ENOENT",this.name="PageNotFoundError",this.message=`Cannot find module for page: ${e}`}}class v extends Error{constructor(e,t){super(),this.message=`Failed to load static file for page: ${e} ${t}`}}class _ extends Error{constructor(){super(),this.code="ENOENT",this.message="Cannot find the middleware module"}}function j(e){return JSON.stringify({message:e.message,stack:e.stack})}},73668,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"isLocalURL",{enumerable:!0,get:function(){return a}});let s=e.r(18967),n=e.r(52817);function a(e){if(!(0,s.isAbsoluteUrl)(e))return!0;try{let t=(0,s.getLocationOrigin)(),r=new URL(e,t);return r.origin===t&&(0,n.hasBasePath)(r.pathname)}catch(e){return!1}}},84508,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"errorOnce",{enumerable:!0,get:function(){return s}});let s=e=>{}},22016,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s={default:function(){return b},useLinkStatus:function(){return y}};for(var n in s)Object.defineProperty(r,n,{enumerable:!0,get:s[n]});let a=e.r(90809),l=e.r(43476),o=a._(e.r(71645)),i=e.r(95057),u=e.r(8372),c=e.r(18581),d=e.r(18967),m=e.r(5550);e.r(33525);let f=e.r(91949),p=e.r(73668),h=e.r(65165);function x(e){return"string"==typeof e?e:(0,i.formatUrl)(e)}function b(t){var r;let s,n,a,[i,b]=(0,o.useOptimistic)(f.IDLE_LINK_STATUS),y=(0,o.useRef)(null),{href:v,as:_,children:j,prefetch:N=null,passHref:S,replace:w,shallow:O,scroll:P,onClick:E,onMouseEnter:T,onTouchStart:A,legacyBehavior:C=!1,onNavigate:L,ref:U,unstable_dynamicOnHover:R,...I}=t;s=j,C&&("string"==typeof s||"number"==typeof s)&&(s=(0,l.jsx)("a",{children:s}));let k=o.default.useContext(u.AppRouterContext),D=!1!==N,M=!1!==N?null===(r=N)||"auto"===r?h.FetchStrategy.PPR:h.FetchStrategy.Full:h.FetchStrategy.PPR,{href:$,as:F}=o.default.useMemo(()=>{let e=x(v);return{href:e,as:_?x(_):e}},[v,_]);if(C){if(s?.$$typeof===Symbol.for("react.lazy"))throw Object.defineProperty(Error("`<Link legacyBehavior>` received a direct child that is either a Server Component, or JSX that was loaded with React.lazy(). This is not supported. Either remove legacyBehavior, or make the direct child a Client Component that renders the Link's `<a>` tag."),"__NEXT_ERROR_CODE",{value:"E863",enumerable:!1,configurable:!0});n=o.default.Children.only(s)}let q=C?n&&"object"==typeof n&&n.ref:U,z=o.default.useCallback(e=>(null!==k&&(y.current=(0,f.mountLinkInstance)(e,$,k,M,D,b)),()=>{y.current&&((0,f.unmountLinkForCurrentNavigation)(y.current),y.current=null),(0,f.unmountPrefetchableInstance)(e)}),[D,$,k,M,b]),B={ref:(0,c.useMergedRef)(z,q),onClick(t){C||"function"!=typeof E||E(t),C&&n.props&&"function"==typeof n.props.onClick&&n.props.onClick(t),!k||t.defaultPrevented||function(t,r,s,n,a,l,i){if("undefined"!=typeof window){let u,{nodeName:c}=t.currentTarget;if("A"===c.toUpperCase()&&((u=t.currentTarget.getAttribute("target"))&&"_self"!==u||t.metaKey||t.ctrlKey||t.shiftKey||t.altKey||t.nativeEvent&&2===t.nativeEvent.which)||t.currentTarget.hasAttribute("download"))return;if(!(0,p.isLocalURL)(r)){a&&(t.preventDefault(),location.replace(r));return}if(t.preventDefault(),i){let e=!1;if(i({preventDefault:()=>{e=!0}}),e)return}let{dispatchNavigateAction:d}=e.r(99781);o.default.startTransition(()=>{d(s||r,a?"replace":"push",l??!0,n.current)})}}(t,$,F,y,w,P,L)},onMouseEnter(e){C||"function"!=typeof T||T(e),C&&n.props&&"function"==typeof n.props.onMouseEnter&&n.props.onMouseEnter(e),k&&D&&(0,f.onNavigationIntent)(e.currentTarget,!0===R)},onTouchStart:function(e){C||"function"!=typeof A||A(e),C&&n.props&&"function"==typeof n.props.onTouchStart&&n.props.onTouchStart(e),k&&D&&(0,f.onNavigationIntent)(e.currentTarget,!0===R)}};return(0,d.isAbsoluteUrl)(F)?B.href=F:C&&!S&&("a"!==n.type||"href"in n.props)||(B.href=(0,m.addBasePath)(F)),a=C?o.default.cloneElement(n,B):(0,l.jsx)("a",{...I,...B,children:s}),(0,l.jsx)(g.Provider,{value:i,children:a})}e.r(84508);let g=(0,o.createContext)(f.IDLE_LINK_STATUS),y=()=>(0,o.useContext)(g);("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},18566,(e,t,r)=>{t.exports=e.r(76562)},89405,e=>{"use strict";let t=["viewer","admin","owner"],r={viewer:0,admin:1,owner:2};function s(e){return"string"==typeof e&&t.includes(e)}function n(e,t){return r[e]>=r[t]}e.s(["hasRequiredRole",()=>n,"isAdminRole",()=>s])},53210,e=>{"use strict";var t=e.i(88715);let r=null,s=r=(0,t.createClient)("https://wrnepxzmmuzcsmjmadli.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndybmVweHptbXV6Y3Ntam1hZGxpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg0NjE0NTYsImV4cCI6MjA3NDAzNzQ1Nn0.NcrD3dr1bxmHzH81ThzGbXxlAnS5qBIAod618CvSSvs",{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0}});e.s(["supabase",0,s])},617,e=>{"use strict";var t=e.i(43476),r=e.i(932),s=e.i(22016),n=e.i(18566),a=e.i(71645),l=e.i(89405),o=e.i(53210);function i(e){return{...e,loading:!0,error:null}}let u=[{href:"/admin",label:"Dashboard"},{href:"/admin/logs",label:"Logs"},{href:"/admin/roles",label:"Roles"}];function c(e){let c,m,f,p,h,x,b,g,y,v,_,j,N,S,w,O,P,E,T,A=(0,r.c)(58),{children:C,pageTitle:L,pageDescription:U,requiredRole:R}=e,I=void 0===R?"viewer":R,k=(0,n.usePathname)(),{loading:D,error:M,session:$,role:F}=function(){let e,t,s,n,u,c=(0,r.c)(6);c[0]===Symbol.for("react.memo_cache_sentinel")?(e={loading:!0,error:null,session:null,role:null},c[0]=e):e=c[0];let[d,m]=(0,a.useState)(e);c[1]===Symbol.for("react.memo_cache_sentinel")?(t=async()=>{m(i);let{data:e,error:t}=await o.supabase.auth.getSession();if(t)return void m({loading:!1,error:t.message,session:null,role:null});let r=e.session;if(!r?.user?.id)return void m({loading:!1,error:null,session:null,role:null});let{data:s,error:n}=await o.supabase.from("admin_user_roles").select("role").eq("user_id",r.user.id).maybeSingle();n?m({loading:!1,error:n.message,session:r,role:null}):m({loading:!1,error:null,session:r,role:(0,l.isAdminRole)(s?.role)?s.role:null})},c[1]=t):t=c[1];let f=t;return c[2]===Symbol.for("react.memo_cache_sentinel")?(s=()=>{let e=!0;(async()=>{if(await f(),!e)return})();let{data:t}=o.supabase.auth.onAuthStateChange(()=>{f()});return()=>{e=!1,t.subscription.unsubscribe()}},n=[f],c[2]=s,c[3]=n):(s=c[2],n=c[3]),(0,a.useEffect)(s,n),c[4]!==d?(u={...d,refresh:f},c[4]=d,c[5]=u):u=c[5],u}(),[q,z]=(0,a.useState)(!1);e:{if(!F){c=!1;break e}c=(0,l.hasRequiredRole)(F,I)}let B=c;A[0]===Symbol.for("react.memo_cache_sentinel")?(m=async()=>{z(!0),await o.supabase.auth.signOut(),z(!1)},A[0]=m):m=A[0];let J=m;if(D){let e;return A[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsx)("main",{className:"min-h-screen bg-slate-50 p-6",children:(0,t.jsx)("div",{className:"mx-auto max-w-5xl rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:(0,t.jsx)("p",{className:"text-sm text-slate-600",children:"Loading admin portal..."})})}),A[1]=e):e=A[1],e}if(M){let e,r;return A[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsx)("h1",{className:"text-lg font-semibold text-red-900",children:"Admin access check failed"}),A[2]=e):e=A[2],A[3]!==M?(r=(0,t.jsx)("main",{className:"min-h-screen bg-slate-50 p-6",children:(0,t.jsxs)("div",{className:"mx-auto max-w-5xl rounded-2xl border border-red-200 bg-red-50 p-6",children:[e,(0,t.jsx)("p",{className:"mt-2 text-sm text-red-800",children:M})]})}),A[3]=M,A[4]=r):r=A[4],r}if(!$){let e;return A[5]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsx)(d,{}),A[5]=e):e=A[5],e}if(!F){let e,r,s;return A[6]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsx)("h1",{className:"text-lg font-semibold text-amber-950",children:"No admin role assigned"}),r=(0,t.jsx)("p",{className:"mt-2 text-sm text-amber-900",children:"Your account is signed in but does not have access to admin pages."}),A[6]=e,A[7]=r):(e=A[6],r=A[7]),A[8]!==$.user.id?(s=(0,t.jsx)("main",{className:"min-h-screen bg-slate-50 p-6",children:(0,t.jsxs)("div",{className:"mx-auto max-w-5xl rounded-2xl border border-amber-300 bg-amber-50 p-6",children:[e,r,(0,t.jsxs)("p",{className:"mt-1 break-all text-xs text-amber-800",children:["User ID: ",$.user.id]})]})}),A[8]=$.user.id,A[9]=s):s=A[9],s}if(!B){let e,r,s,n;return A[10]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsx)("h1",{className:"text-lg font-semibold text-amber-950",children:"Insufficient role"}),A[10]=e):e=A[10],A[11]!==I?(r=(0,t.jsx)("span",{className:"font-semibold",children:I}),A[11]=I,A[12]=r):r=A[12],A[13]!==F?(s=(0,t.jsx)("span",{className:"font-semibold",children:F}),A[13]=F,A[14]=s):s=A[14],A[15]!==r||A[16]!==s?(n=(0,t.jsx)("main",{className:"min-h-screen bg-slate-50 p-6",children:(0,t.jsxs)("div",{className:"mx-auto max-w-5xl rounded-2xl border border-amber-300 bg-amber-50 p-6",children:[e,(0,t.jsxs)("p",{className:"mt-2 text-sm text-amber-900",children:["This page requires ",r," access. Your role is ",s,"."]})]})}),A[15]=r,A[16]=s,A[17]=n):n=A[17],n}let K=$.user.user_metadata?.nickname??$.user.user_metadata?.name??$.user.user_metadata?.full_name??null,V=$.user.email??null;A[18]===Symbol.for("react.memo_cache_sentinel")?(f=(0,t.jsx)("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"EvenUp Admin"}),A[18]=f):f=A[18],A[19]!==L?(p=(0,t.jsx)("h1",{className:"text-2xl font-semibold text-slate-900",children:L}),A[19]=L,A[20]=p):p=A[20],A[21]!==U?(h=U?(0,t.jsx)("p",{className:"mt-1 text-sm text-slate-600",children:U}):null,A[21]=U,A[22]=h):h=A[22],A[23]!==p||A[24]!==h?(x=(0,t.jsxs)("div",{children:[f,p,h]}),A[23]=p,A[24]=h,A[25]=x):x=A[25];let X=K??"Admin User";A[26]!==X?(b=(0,t.jsx)("p",{className:"truncate text-xs font-medium text-slate-800",children:X}),A[26]=X,A[27]=b):b=A[27];let Y=V??$.user.id;A[28]!==Y?(g=(0,t.jsx)("p",{className:"truncate text-[11px] text-slate-600",children:Y}),A[28]=Y,A[29]=g):g=A[29],A[30]!==g||A[31]!==b?(y=(0,t.jsxs)("div",{className:"max-w-[260px] rounded-lg border border-slate-200 bg-slate-50 px-3 py-2 text-right",children:[b,g]}),A[30]=g,A[31]=b,A[32]=y):y=A[32],A[33]!==F?(v=(0,t.jsxs)("span",{className:"rounded-full bg-slate-100 px-3 py-1 text-xs font-medium text-slate-700",children:["role: ",F]}),A[33]=F,A[34]=v):v=A[34],A[35]===Symbol.for("react.memo_cache_sentinel")?(_=()=>void J(),A[35]=_):_=A[35];let H=q?"Signing out...":"Sign out";return A[36]!==q||A[37]!==H?(j=(0,t.jsx)("button",{type:"button",onClick:_,disabled:q,className:"rounded-lg border border-slate-300 px-3 py-2 text-sm text-slate-700 hover:bg-slate-100 disabled:cursor-not-allowed disabled:opacity-60",children:H}),A[36]=q,A[37]=H,A[38]=j):j=A[38],A[39]!==y||A[40]!==v||A[41]!==j?(N=(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[y,v,j]}),A[39]=y,A[40]=v,A[41]=j,A[42]=N):N=A[42],A[43]!==N||A[44]!==x?(S=(0,t.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[x,N]}),A[43]=N,A[44]=x,A[45]=S):S=A[45],A[46]!==k?(w=u.map(e=>{let r=k===e.href||"/admin"!==e.href&&k.startsWith(`${e.href}/`);return(0,t.jsx)(s.default,{href:e.href,className:`rounded-lg px-3 py-2 text-sm ${r?"bg-slate-900 text-white":"border border-slate-300 text-slate-700 hover:bg-slate-100"}`,children:e.label},e.href)}),A[46]=k,A[47]=w):w=A[47],A[48]!==w?(O=(0,t.jsx)("nav",{className:"mt-4 flex flex-wrap gap-2 border-t border-slate-200 pt-4",children:w}),A[48]=w,A[49]=O):O=A[49],A[50]!==S||A[51]!==O?(P=(0,t.jsxs)("header",{className:"rounded-2xl border border-slate-200 bg-white p-4 shadow-sm sm:p-6",children:[S,O]}),A[50]=S,A[51]=O,A[52]=P):P=A[52],A[53]!==C?(E=(0,t.jsx)("section",{className:"rounded-2xl border border-slate-200 bg-white p-4 shadow-sm sm:p-6",children:C}),A[53]=C,A[54]=E):E=A[54],A[55]!==P||A[56]!==E?(T=(0,t.jsx)("main",{className:"min-h-screen bg-slate-50 p-4 sm:p-6",children:(0,t.jsxs)("div",{className:"mx-auto max-w-7xl space-y-4",children:[P,E]})}),A[55]=P,A[56]=E,A[57]=T):T=A[57],T}function d(){let e,s,n,l,i,u,c,d=(0,r.c)(20),[m,f]=(0,a.useState)(""),[p,h]=(0,a.useState)(""),[x,b]=(0,a.useState)("email"),[g,y]=(0,a.useState)("idle"),[v,_]=(0,a.useState)("");d[0]!==m?(e=async e=>{e.preventDefault(),y("sending"),_("");let{error:t}=await o.supabase.auth.signInWithOtp({email:m.trim(),options:{shouldCreateUser:!1}});if(t){y("error"),_(t.message);return}y("sent"),b("otp"),_("OTP sent. Enter the code from your email.")},d[0]=m,d[1]=e):e=d[1];let j=e;d[2]!==m||d[3]!==p?(s=async e=>{e.preventDefault(),y("verifying"),_("");let{error:t}=await o.supabase.auth.verifyOtp({email:m.trim(),token:p.trim(),type:"email"});if(t){y("error"),_(t.message);return}y("verified"),_("OTP verified. Checking admin access...")},d[2]=m,d[3]=p,d[4]=s):s=d[4];let N=s;return d[5]===Symbol.for("react.memo_cache_sentinel")?(n=(0,t.jsx)("h1",{className:"text-xl font-semibold text-slate-900",children:"Admin sign in"}),d[5]=n):n=d[5],d[6]===Symbol.for("react.memo_cache_sentinel")?(l=(0,t.jsxs)("p",{className:"mt-2 text-sm text-slate-600",children:["Sign in with an account that has an entry in ",(0,t.jsx)("code",{children:"admin_user_roles"}),"."]}),d[6]=l):l=d[6],d[7]!==m||d[8]!==j||d[9]!==N||d[10]!==p||d[11]!==g||d[12]!==x?(i="email"===x?(0,t.jsxs)("form",{className:"mt-5 space-y-3",onSubmit:e=>void j(e),children:[(0,t.jsx)("label",{className:"block text-sm text-slate-700",htmlFor:"admin-email",children:"Email"}),(0,t.jsx)("input",{id:"admin-email",type:"email",required:!0,value:m,onChange:e=>f(e.target.value),placeholder:"you@evenup.in",className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm outline-none focus:border-slate-500"}),(0,t.jsx)("button",{type:"submit",disabled:"sending"===g,className:"w-full rounded-lg bg-slate-900 px-4 py-2 text-sm text-white hover:bg-slate-800 disabled:cursor-not-allowed disabled:opacity-70",children:"sending"===g?"Sending...":"Send OTP"})]}):(0,t.jsxs)("form",{className:"mt-5 space-y-3",onSubmit:e=>void N(e),children:[(0,t.jsx)("label",{className:"block text-sm text-slate-700",htmlFor:"admin-otp-email",children:"Email"}),(0,t.jsx)("input",{id:"admin-otp-email",type:"email",value:m,readOnly:!0,className:"w-full rounded-lg border border-slate-200 bg-slate-50 px-3 py-2 text-sm text-slate-700"}),(0,t.jsx)("label",{className:"block text-sm text-slate-700",htmlFor:"admin-otp-code",children:"OTP code"}),(0,t.jsx)("input",{id:"admin-otp-code",type:"text",inputMode:"numeric",autoComplete:"one-time-code",required:!0,value:p,onChange:e=>h(e.target.value),placeholder:"123456",className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm outline-none focus:border-slate-500"}),(0,t.jsx)("button",{type:"submit",disabled:"verifying"===g,className:"w-full rounded-lg bg-slate-900 px-4 py-2 text-sm text-white hover:bg-slate-800 disabled:cursor-not-allowed disabled:opacity-70",children:"verifying"===g?"Verifying...":"Verify OTP"}),(0,t.jsx)("button",{type:"button",onClick:()=>{b("email"),h(""),y("idle"),_("")},className:"w-full rounded-lg border border-slate-300 px-4 py-2 text-sm text-slate-700 hover:bg-slate-100",children:"Use different email"})]}),d[7]=m,d[8]=j,d[9]=N,d[10]=p,d[11]=g,d[12]=x,d[13]=i):i=d[13],d[14]!==v||d[15]!==g?(u=v?(0,t.jsx)("p",{className:`mt-3 text-sm ${"error"===g?"text-red-700":"text-emerald-700"}`,children:v}):null,d[14]=v,d[15]=g,d[16]=u):u=d[16],d[17]!==i||d[18]!==u?(c=(0,t.jsx)("main",{className:"min-h-screen bg-slate-50 p-6",children:(0,t.jsxs)("div",{className:"mx-auto max-w-md rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[n,l,i,u]})}),d[17]=i,d[18]=u,d[19]=c):c=d[19],c}e.s(["default",()=>c],617)},23261,e=>{"use strict";var t=e.i(43476),r=e.i(932),s=e.i(71645),n=e.i(617),a=e.i(53210);let l={activeUsers:0,invitedUsers:0,deletedUsers:0,usersActive24h:0,usersActive7d:0,totalLogs:0,criticalLogs:0,highLogs:0};function o(){let e,o,u,c,d,m,f,p,h,x,b,g,y,v,_,j,N,S=(0,r.c)(46),[w,O]=(0,s.useState)(l),[P,E]=(0,s.useState)(!0),[T,A]=(0,s.useState)(null),[C,L]=(0,s.useState)(null);S[0]===Symbol.for("react.memo_cache_sentinel")?(e=async()=>{E(!0),A(null);let e=new Date,t=new Date(e.getTime()-864e5).toISOString(),r=new Date(e.getTime()-6048e5).toISOString(),[s,n,l,o,i,u,c,d]=await Promise.all([a.supabase.from("user_profiles").select("id",{count:"exact",head:!0}).eq("status","active").is("deleted_at",null),a.supabase.from("user_profiles").select("id",{count:"exact",head:!0}).eq("status","invited").is("deleted_at",null),a.supabase.from("user_profiles").select("id",{count:"exact",head:!0}).not("deleted_at","is",null),a.supabase.from("user_profiles").select("id",{count:"exact",head:!0}).is("deleted_at",null).gte("last_active_at",t),a.supabase.from("user_profiles").select("id",{count:"exact",head:!0}).is("deleted_at",null).gte("last_active_at",r),a.supabase.from("app_error_logs").select("id",{count:"exact",head:!0}),a.supabase.from("app_error_logs").select("id",{count:"exact",head:!0}).eq("severity","critical"),a.supabase.from("app_error_logs").select("id",{count:"exact",head:!0}).eq("severity","high")]),m=s.error??n.error??l.error??o.error??i.error??u.error??c.error??d.error;if(m){A(m.message),E(!1);return}O({activeUsers:s.count??0,invitedUsers:n.count??0,deletedUsers:l.count??0,usersActive24h:o.count??0,usersActive7d:i.count??0,totalLogs:u.count??0,criticalLogs:c.count??0,highLogs:d.count??0}),L(new Date().toLocaleString()),E(!1)},S[0]=e):e=S[0];let U=e;S[1]===Symbol.for("react.memo_cache_sentinel")?(o=()=>{let e=window.setTimeout(()=>{U()},0);return()=>{window.clearTimeout(e)}},u=[U],S[1]=o,S[2]=u):(o=S[1],u=S[2]),(0,s.useEffect)(o,u),S[3]===Symbol.for("react.memo_cache_sentinel")?(c=(0,t.jsx)("h2",{className:"text-lg font-semibold text-slate-900",children:"System overview"}),S[3]=c):c=S[3],S[4]===Symbol.for("react.memo_cache_sentinel")?(d=(0,t.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[c,(0,t.jsx)("button",{type:"button",onClick:()=>void U(),className:"rounded-lg border border-slate-300 px-3 py-2 text-sm text-slate-700 hover:bg-slate-100",children:"Refresh"})]}),S[4]=d):d=S[4],S[5]!==T?(m=T?(0,t.jsx)("p",{className:"mt-3 rounded-lg border border-red-200 bg-red-50 px-3 py-2 text-sm text-red-700",children:T}):null,S[5]=T,S[6]=m):m=S[6],S[7]!==P||S[8]!==w.activeUsers?(f=(0,t.jsx)(i,{label:"Active users",value:w.activeUsers,loading:P}),S[7]=P,S[8]=w.activeUsers,S[9]=f):f=S[9],S[10]!==P||S[11]!==w.invitedUsers?(p=(0,t.jsx)(i,{label:"Invited users",value:w.invitedUsers,loading:P}),S[10]=P,S[11]=w.invitedUsers,S[12]=p):p=S[12],S[13]!==P||S[14]!==w.deletedUsers?(h=(0,t.jsx)(i,{label:"Deleted users",value:w.deletedUsers,loading:P}),S[13]=P,S[14]=w.deletedUsers,S[15]=h):h=S[15],S[16]!==P||S[17]!==w.usersActive24h?(x=(0,t.jsx)(i,{label:"Active in last 24h",value:w.usersActive24h,loading:P}),S[16]=P,S[17]=w.usersActive24h,S[18]=x):x=S[18],S[19]!==P||S[20]!==w.usersActive7d?(b=(0,t.jsx)(i,{label:"Active in last 7d",value:w.usersActive7d,loading:P}),S[19]=P,S[20]=w.usersActive7d,S[21]=b):b=S[21],S[22]!==P||S[23]!==w.totalLogs?(g=(0,t.jsx)(i,{label:"Total logs",value:w.totalLogs,loading:P}),S[22]=P,S[23]=w.totalLogs,S[24]=g):g=S[24],S[25]!==P||S[26]!==w.criticalLogs?(y=(0,t.jsx)(i,{label:"Critical logs",value:w.criticalLogs,loading:P}),S[25]=P,S[26]=w.criticalLogs,S[27]=y):y=S[27],S[28]!==P||S[29]!==w.highLogs?(v=(0,t.jsx)(i,{label:"High severity logs",value:w.highLogs,loading:P}),S[28]=P,S[29]=w.highLogs,S[30]=v):v=S[30],S[31]!==b||S[32]!==g||S[33]!==y||S[34]!==v||S[35]!==f||S[36]!==p||S[37]!==h||S[38]!==x?(_=(0,t.jsxs)("div",{className:"mt-4 grid gap-3 sm:grid-cols-2 lg:grid-cols-4",children:[f,p,h,x,b,g,y,v]}),S[31]=b,S[32]=g,S[33]=y,S[34]=v,S[35]=f,S[36]=p,S[37]=h,S[38]=x,S[39]=_):_=S[39];let R=C??"not fetched yet";return S[40]!==R?(j=(0,t.jsxs)("p",{className:"mt-4 text-xs text-slate-500",children:["Last updated: ",R]}),S[40]=R,S[41]=j):j=S[41],S[42]!==_||S[43]!==j||S[44]!==m?(N=(0,t.jsxs)(n.default,{pageTitle:"Dashboard",pageDescription:"Live overview of user lifecycle and production errors.",requiredRole:"viewer",children:[d,m,_,j]}),S[42]=_,S[43]=j,S[44]=m,S[45]=N):N=S[45],N}function i(e){let s,n,a,l=(0,r.c)(7),{label:o,value:i,loading:u}=e;l[0]!==o?(s=(0,t.jsx)("p",{className:"text-xs uppercase tracking-wide text-slate-600",children:o}),l[0]=o,l[1]=s):s=l[1];let c=u?"...":i;return l[2]!==c?(n=(0,t.jsx)("p",{className:"mt-2 text-2xl font-semibold text-slate-900",children:c}),l[2]=c,l[3]=n):n=l[3],l[4]!==s||l[5]!==n?(a=(0,t.jsxs)("article",{className:"rounded-xl border border-slate-200 bg-slate-50 p-4",children:[s,n]}),l[4]=s,l[5]=n,l[6]=a):a=l[6],a}e.s(["default",()=>o])}]);