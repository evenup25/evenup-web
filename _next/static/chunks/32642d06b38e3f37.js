(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,79474,(e,i,t)=>{"use strict";var r=e.r(71645).__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;t.c=function(e){return r.H.useMemoCache(e)}},932,(e,i,t)=>{"use strict";i.exports=e.r(79474)},264,e=>{"use strict";var i=e.i(43476),t=e.i(932),r=e.i(71645);let n=(0,e.i(88715).createClient)("https://wrnepxzmmuzcsmjmadli.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndybmVweHptbXV6Y3Ntam1hZGxpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg0NjE0NTYsImV4cCI6MjA3NDAzNzQ1Nn0.NcrD3dr1bxmHzH81ThzGbXxlAnS5qBIAod618CvSSvs");function s(){let[e,t]=(0,r.useState)("loading"),[s,d]=(0,r.useState)(""),[o,u]=(0,r.useState)(5),[m,p]=(0,r.useState)(null),x=(0,r.useMemo)(()=>"undefined"!=typeof navigator&&/android|iphone|ipad|ipod/i.test(navigator.userAgent),[]);return(0,r.useEffect)(()=>{(async()=>{try{if(window.location.hash.includes("error=access_denied"))return void t("expired");let{data:e,error:i}=await n.auth.getSession();if(i||!e.session?.user)return void t("expired");let r=e.session.user;if(!r.email_confirmed_at)return void t("expired");let s=r.user_metadata?.nickname??r.user_metadata?.name??null,{error:a}=await n.rpc("materialize_user_profile",{p_profile_id:r.id,p_email:r.email,p_phone:null,p_nickname:s,p_verified_channel:"email"});if(a){if(a.message?.includes("account_deleted"))return void t("deleted");throw a}let l=r.email??"",c=`evenup:///(auth)/login?verified=1&email=${encodeURIComponent(l)}`;p(c),await n.auth.signOut(),t("verified")}catch(e){console.error("[verify-email]",e),d(e?.message??"Unexpected error"),t("error")}})()},[]),(0,r.useEffect)(()=>{if("verified"!==e||!x||!m)return;if(0===o){window.location.href=m;return}let i=setTimeout(()=>u(e=>e-1),1e3);return()=>clearTimeout(i)},[e,x,m,o]),(0,i.jsx)("main",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-white to-purple-100 flex items-center justify-center px-4",children:(0,i.jsxs)("div",{className:"w-full max-w-md rounded-2xl bg-white shadow-xl p-8 text-center",children:["loading"===e&&(0,i.jsx)(a,{children:"Verifying your emailâ€¦"}),"verified"===e&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(c,{success:!0}),(0,i.jsx)(a,{children:"Email verified ðŸŽ‰"}),x?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("p",{className:"mt-2 text-gray-600",children:["Opening EvenUp app in ",(0,i.jsxs)("span",{className:"font-semibold",children:[o,"s"]})]}),(0,i.jsx)(l,{className:"mt-6",onClick:()=>window.location.href=m,children:"Open app now"})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("p",{className:"mt-3 text-gray-600",children:"Your email has been verified successfully."}),(0,i.jsx)("p",{className:"mt-1 text-gray-600",children:"You can now log in from the EvenUp mobile app."}),(0,i.jsx)(l,{className:"mt-6",disabled:!0,children:"Open the EvenUp app"})]})]}),"expired"===e&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(c,{}),(0,i.jsx)(a,{children:"Link expired"}),(0,i.jsx)("p",{className:"mt-2 text-gray-600",children:"This verification link is invalid or already used."})]}),"deleted"===e&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(c,{}),(0,i.jsx)(a,{children:"Account deleted"}),(0,i.jsx)("p",{className:"mt-2 text-gray-600",children:"This account no longer exists. Please sign up again."})]}),"error"===e&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(c,{}),(0,i.jsx)(a,{children:"Verification failed"}),(0,i.jsx)("p",{className:"mt-2 text-red-600",children:s})]})]})})}function a(e){let r,n=(0,t.c)(2),{children:s}=e;return n[0]!==s?(r=(0,i.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:s}),n[0]=s,n[1]=r):r=n[1],r}function l(e){let r,n,s,a,l=(0,t.c)(8);l[0]!==e?({children:r,className:s,...n}=e,l[0]=e,l[1]=r,l[2]=n,l[3]=s):(r=l[1],n=l[2],s=l[3]);let c=void 0===s?"":s,d=`w-full rounded-xl bg-purple-600 px-4 py-3 text-white font-medium hover:bg-purple-700 transition disabled:opacity-50 ${c}`;return l[4]!==r||l[5]!==n||l[6]!==d?(a=(0,i.jsx)("button",{...n,className:d,children:r}),l[4]=r,l[5]=n,l[6]=d,l[7]=a):a=l[7],a}function c(e){let r,n=(0,t.c)(3),{success:s}=e,a=`mx-auto mb-4 h-12 w-12 rounded-full flex items-center justify-center ${s?"bg-green-100 text-green-600":"bg-purple-100 text-purple-600"}`,l=s?"âœ“":"!";return n[0]!==a||n[1]!==l?(r=(0,i.jsx)("div",{className:a,children:l}),n[0]=a,n[1]=l,n[2]=r):r=n[2],r}e.s(["default",()=>s])}]);